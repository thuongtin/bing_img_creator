package test

import (
	"context"
	"testing"
	"time"

	bing "github.com/thuongtin/bing_img_creator"
)

func TestImgGen(t *testing.T) {
	bingImgGen := bing.NewImgGen("_clsk=lb6w7s%7C1716431196515%7C2%7C0%7Cz.clarity.ms%2Fcollect; _Rwho=u=d&ts=2024-05-23; _SS=SID=348ED1017A546651102FC5897B4667DF&R=0&RB=0&GB=0&RG=0&RP=0; _RwBf=r=0&ilt=1&ihpd=0&ispd=0&rc=0&rb=0&gb=0&rg=0&pc=0&mtu=0&rbb=0&g=0&cid=&clo=0&v=1&l=2024-05-22T07:00:00.0000000Z&lft=0001-01-01T00:00:00.0000000&aof=0&ard=0001-01-01T00:00:00.0000000&rwdbt=0001-01-01T00:00:00.0000000&rwflt=0001-01-01T00:00:00.0000000&o=6&p=&c=&t=0&s=0001-01-01T00:00:00.0000000+00:00&ts=2024-05-23T02:26:36.2655785+00:00&rwred=0&wls=2&wlb=&wle=&ccp=&cpt=&lka=0&lkt=0&aad=0&TH=; _C_ETH=1; _EDGE_S=F=1&SID=348ED1017A546651102FC5897B4667DF; WLS=C=7ee342baf13b98e4&N=James; SRCHUSR=DOB=20240523&TPC=1716431174000&POEX=W&T=1716431194000; GI_FRE_COOKIE=gi_prompt=2&gi_fre=1; WLID=zGi/sgPSsYSNGvSVlrSMXmXkqtWAM5kW+A68wo9DwsvcmCX/qhGg6zia6JnKEK4yv3PtkkLQaJLdrP8yDZVnaHRt2BNujpleJFvDcso4Krk=; _U=1u1_GphSe5CQQKEaq21TbNM0ec2qWffhdc3FNianllKh-PzFkyvQQAhY_kHS1m__r-HC-aWtg53Ah7l2qC38kIezDvyHOj7EhUMHakeEQzxWYhM4-i7g08roxWvw4giu7gOeDIx7LmtJB4f6MQHFge0X-dJziR2D-yXFAKOhrG6QPo08QRKxDi7bItAWVnUAFLAtpKxMb-Ib7FjBtAsGf4rC45tFNQ7b0aJs9vI9zZgg; KievRPSSecAuth=FACKBBRaTOJILtFsMkpLVWSG6AN6C/svRwNmAAAEgAAACIh6GUXBVoX8SATblKR4rzwqPnuixwrDts5zvc3NUKDP46hMsl3BEogNBgw8HLMOXaDHIP3PpayYhoDFdu71xKXGy57C4e6+gYElYeVS10HnPbEmizgNGqrzcE7c9eEjtRsh+cuq+SXqZmtIpumJsdiX57CS5Vp3JvsxyIwz66+bgayJogpEt6vTmwDDBwSy2GJOCrD00zlBz1IvddDERMsvsTl9L5IOgh4C1B9WCAM5sFX1ZMg8IM7T5CmmXLImyvzsIWMd42j0Co9U3J0wa6Gb4rpoOJWd/pYX7VnBqKSsYlRIm186t0OMTB40q0HY/t7PQZ6OrHJD5G4cuMLjJfqbXa8C/un178XqYe8s6mzWe8lVya6SD0CaUz7rRhoe9VPVfKHoQbzuBPxtSjPOrz3YcrYMjRKMpXmEE5SV2rtVWzCMEiSn3J4H3DCmgLkprI0vAkqzCmlbASy+LgFbxKwRFTs7bqrCajyLaSsN5f7spFMNWxT9DOz6sv07OT11F66Dz+0MimPfc3/XBfr7CGjRWjA+qbcz6HtJjwpFN5u1p00VHDAXhPW6qBm/JWcR0nhdhOR1y404+CKoDZzCQBdQt0TDQ+pbOMDNbqycMAs9kVCswiKs43KmG/lZNSpw55T/+Ye2GaioOJz3PdcNtAVpNhbvn2GFsZJiAo3Y3bqpnpO1YsAIGHAJo5qNy1LQC8mrYGpy/dO6Yw6Y6QT9nZtbUggSM9KA2qRb10+WeAe1oebBsUkrSgRL1J7qq/LqAzIFwIzElgCgSRGYHxsE8by0R1UoByPLFwGDqAGTbM+fHaprC4BccAxrOm6KcC86vnNG/f3dHRfts+mZpBreqiAA0wuCd46vSKHPaGMiV/t3JogulFShPFiuSj4JRAH6cauMbuq2N9kKV5Pc5pGiFGJaEnM+5ESOFUr147VWuLK0eOtAbMJuZtsOsxzhE2eWRgZQvn12iZ/9Erx+rhYDKX3c8oI1OCvFV+CcEiIe6VIW8uBFEFj/kjT5Rg0bk48r5z2pPsqdsSCriRkr+nEVfUQOXsg7EMraAVz8Q2FnD0iH0APtMQSiurunpfpd298WmNmswtC9A+yLOXSRAZjJ0qay10kp4zmDNFygY26SEVh1zXoBm74ZeZ5a7BKxCnDCSQqNw13R7l3ntV1vbddwhvL2btu9xcebJIVvC4J0EcboO+tSKWarHoR8O3FJl5r0bB3dOGCcJWCWeTph/Bk/sAUy8MPNfFAzOZjKMTLB1kx5H+BOQx1q+FUHLLBdU8ES4O4pm/y1nPSlvx5Yj3d26pPxunmyWCNNBbYFzX1XbKfK3XyIuH93Mct0X9nk1hu7tMjouC3TNrchsKqquooAtrD6owTFdZqUvSqPIOxbDKF1uAnTxMWCll99WysMc3K8YDL8+RxjVcTdbcbDS/BXi5hoxEiSZOW5/DIuXc8HI4m2JADqmbf/TqWreESn8b4QeDS2FABLPx4b8yUWL4BX+JaGhcWHds4vrg==; ipv6=hit=1716434797030; ANON=A=03B349F84982BEFCC7496C7BFFFFFFFF&E=1dcc&W=1; SRCHUID=V=2&GUID=9E441847CB4046609D798583B4D34E36&dmnchg=1; NAP=V=1.9&E=1d72&C=CkUBmlBbN0ShFhRtydLqCe46bpHTMxk4QiobDKxIGlwCiRTGHJoYGA&W=1; CSRFCookie=c5306be8-5b5c-44fe-a79b-09ac72ca66e5; PPLState=1; SRCHHPGUSR=SRCHLANG=en&PV=10.0.0; MUID=179B4AFB614C68CC27775E73605E6968; SRCHD=AF=NOFORM; _EDGE_V=1; MUIDB=179B4AFB614C68CC27775E73605E6968; _clck=7m9jle%7C2%7Cfm0%7C0%7C1604")
	ctx, cancel := context.WithTimeout(context.Background(), time.Minute)
	defer cancel()

	imgURLsCh, err := bingImgGen.GenImgAync(ctx, "cute cat")
	if err != nil {
		t.Error(err)
		return
	}

	imgURLs := <-imgURLsCh
	for _, url := range imgURLs {
		println(url)
	}
}
